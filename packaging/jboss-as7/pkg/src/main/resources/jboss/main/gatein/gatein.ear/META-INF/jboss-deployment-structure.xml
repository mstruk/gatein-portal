<jboss-deployment-structure>
  <!-- Make sub deployments isolated by default, so they cannot see each others classes without a Class-Path entry -->
  <ear-subdeployments-isolated>false</ear-subdeployments-isolated>

  <sub-deployment name="portal.war" >
    <dependencies>
      <module name="org.gatein.common"/>
      <module name="org.gatein.pc"/>
      <!-- org.gatein.pc requires Xerces on TCCL -->
      <module name="org.apache.xerces" services="export"/>

      <module name="org.hibernate"/>
      <module name="org.gatein.sso"/>

      <!-- WSRP configuration is loaded via TCCL -->
      <module name="org.gatein.wsrp"/>
      <module name="org.gatein.wsrp.integration"/>

      <!-- Chromattic uses ServiceLoader to initialize itself -->
      <module name="org.chromattic" services="export"/>

      <!-- Groovy loads types referenced in .gtmpl files via TCCL -->
      <module name="org.json"/>
    </dependencies>
  </sub-deployment>

  <sub-deployment name="gwtGadgets.war" >
    <dependencies>
      <module name="org.gatein.common"/>
    </dependencies>
  </sub-deployment>

  <sub-deployment name="exoadmin.war" >
    <dependencies>
      <module name="org.gatein.common"/>

      <!-- Groovy loads types referenced in .gtmpl files via TCCL -->
      <module name="org.json"/>
    </dependencies>
  </sub-deployment>

  <sub-deployment name="web.war" >
    <dependencies>
      <module name="org.gatein.common"/>
    </dependencies>
  </sub-deployment>

  <sub-deployment name="dashboard.war">
    <dependencies>
      <module name="org.gatein.common"/>

      <!-- Groovy loads types referenced in .gtmpl files via TCCL -->
      <module name="org.json"/>
    </dependencies>
  </sub-deployment>

</jboss-deployment-structure>
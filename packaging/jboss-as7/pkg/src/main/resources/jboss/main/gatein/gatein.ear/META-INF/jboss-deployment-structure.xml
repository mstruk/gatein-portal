<jboss-deployment-structure>
  <!--
       Make gatein.ear sub-deployments non-isolated
  -->
  <ear-subdeployments-isolated>false</ear-subdeployments-isolated>

  <sub-deployment name="portal.war" >
    <dependencies>
      <module name="org.gatein.common"/>
      <module name="org.gatein.sso"/>
      <module name="org.gatein.pc"/>

      <!--
           org.gatein.pc requires Xerces on TCCL
      -->
      <module name="org.apache.xerces" services="export"/>

      <!--
           org.picketlink.idm uses JAXB which uses TCCL
           to load classes packaged locally in org.picketlink.idm
      -->
      <module name="org.picketlink.idm"/>

      <!--
           WSRP configuration is loaded via TCCL
      -->
      <module name="org.gatein.wsrp"/>
      <module name="org.gatein.wsrp.integration"/>

      <!--
           Chromattic uses ServiceLoader (TCCL) to initialize itself
      -->
      <module name="org.chromattic" services="export"/>

      <!--
           JBossCache configuration loads schemas via TCCL
      -->
      <module name="org.jboss.cache"/>

      <!--
           Groovy loads types referenced in .gtmpl files via TCCL
      -->
      <module name="org.json"/>
    </dependencies>
  </sub-deployment>

  <sub-deployment name="gwtGadgets.war" >
    <dependencies>
      <module name="org.gatein.common"/>
    </dependencies>
  </sub-deployment>

  <sub-deployment name="exoadmin.war" >
    <dependencies>
      <module name="org.gatein.common"/>

      <!--
           Groovy loads types referenced in .gtmpl files via TCCL
      -->
      <module name="org.json"/>
    </dependencies>
  </sub-deployment>

  <sub-deployment name="web.war" >
    <dependencies>
      <module name="org.gatein.common"/>

      <!--
           Groovy loads types referenced in .gtmpl files via TCCL
      -->
      <module name="org.json"/>
    </dependencies>
  </sub-deployment>

  <sub-deployment name="dashboard.war">
    <dependencies>
      <module name="org.gatein.common"/>

      <!--
           Groovy loads types referenced in .gtmpl files via TCCL
      -->
      <module name="org.json"/>
    </dependencies>
  </sub-deployment>

</jboss-deployment-structure>